import{a as k,b as f,c as M,d as V,f as W,g as T,h as q,i as K,j as X}from"./chunk-2OPB2DQR.js";import{a as _}from"./chunk-KLVIWWTK.js";import{i as H,k as U,s as v}from"./chunk-QIAVZCJE.js";import{Gb as C,Ma as d,Sb as j,Ub as S,Vb as P,W as y,Xa as b,bb as w,dc as G,ia as L,rb as h,sb as m,tb as g,tc as l,ub as F,uc as x,xb as z,xc as n}from"./chunk-YSO2AELB.js";var ie="0.0.0-development",Y=(()=>{class r extends V{initialize(){this.enableOptionSharing=!0,super.initialize()}update(t){let a=this._cachedMeta;this.updateElements(a.data,0,a.data.length,t)}updateElements(t,a,s,i){let o=i==="reset",{xScale:c,yScale:E}=this._cachedMeta,N=this.resolveDataElementOptions(a,i),Z=this.getSharedOptions(N);for(let u=a;u<a+s;u++){let I=!o&&this.getParsed(u),ee=o?c.getBasePixel():c.getPixelForValue(I.x),te=o?E.getBasePixel():E.getPixelForValue(I.y),O=this.resolveDataElementOptions(u,i),{width:A,height:B,anchorX:ae,anchorY:se}=O,re={x:oe(ae,ee,A),y:ne(se,te,B),width:A,height:B,options:O};this.updateElement(t[u],u,re,i)}this.updateSharedOptions(Z,i,N)}draw(){let t=this.chart.ctx,a=this.getMeta().data||[],s,i;for(s=0,i=a.length;s<i;++s)a[s].draw(t)}}return r.id="matrix",r.version=ie,r.defaults={dataElementType:"matrix",animations:{numbers:{type:"number",properties:["x","y","width","height"]}}},r.overrides={interaction:{mode:"nearest",intersect:!0},scales:{x:{type:"linear",offset:!0},y:{type:"linear",reverse:!0}}},r})();function oe(r,e,t){return r==="left"||r==="start"?e:r==="right"||r==="end"?e-t:e-t/2}function ne(r,e,t){return r==="top"||r==="start"?e:r==="bottom"||r==="end"?e-t:e-t/2}function J(r,e){let{x:t,y:a,width:s,height:i}=r.getProps(["x","y","width","height"],e);return{left:t,top:a,right:t+s,bottom:a+i}}function D(r,e,t){return Math.max(Math.min(r,t),e)}function le(r,e,t){let a=r.borderWidth,s,i,o,c;return k(a)?(s=+a.top||0,i=+a.right||0,o=+a.bottom||0,c=+a.left||0):s=i=o=c=+a||0,{t:D(s,0,t),r:D(i,0,e),b:D(o,0,t),l:D(c,0,e)}}function de(r){let e=J(r,!1),t=e.right-e.left,a=e.bottom-e.top,s=le(r.options,t/2,a/2);return{outer:{x:e.left,y:e.top,w:t,h:a},inner:{x:e.left+s.l,y:e.top+s.t,w:t-s.l-s.r,h:a-s.t-s.b}}}function R(r,e,t,a){let s=e===null,i=t===null,o=!r||s&&i?!1:J(r,a);return o&&(s||e>=o.left&&e<=o.right)&&(i||t>=o.top&&t<=o.bottom)}var p=class extends W{draw(e){let t=this.options,{inner:a,outer:s}=de(this),i=M(t.borderRadius);e.save(),s.w!==a.w||s.h!==a.h?(e.beginPath(),f(e,{x:s.x,y:s.y,w:s.w,h:s.h,radius:i}),f(e,{x:a.x,y:a.y,w:a.w,h:a.h,radius:i}),e.fillStyle=t.backgroundColor,e.fill(),e.fillStyle=t.borderColor,e.fill("evenodd")):(e.beginPath(),f(e,{x:a.x,y:a.y,w:a.w,h:a.h,radius:i}),e.fillStyle=t.backgroundColor,e.fill()),e.restore()}inRange(e,t,a){return R(this,e,t,a)}inXRange(e,t){return R(this,e,null,t)}inYRange(e,t){return R(this,null,e,t)}getCenterPoint(e){let{x:t,y:a,width:s,height:i}=this.getProps(["x","y","width","height"],e);return{x:t+s/2,y:a+i/2}}tooltipPosition(){return this.getCenterPoint()}getRange(e){return e==="x"?this.width/2:this.height/2}constructor(e){super(),e&&Object.assign(this,e)}};p.id="matrix";p.defaults={backgroundColor:void 0,borderColor:void 0,borderWidth:void 0,borderRadius:0,anchorX:"center",anchorY:"center",width:20,height:20};T.register(...q,Y,p);var Q=class r{layoutService=y(_);isDarkTheme=l(()=>this.layoutService.isDarkTheme());primaryColor=l(()=>this.layoutService.layoutConfig().primary);surfaceColor=l(()=>this.layoutService.layoutConfig().surface);label=n("Label");dataset=n();conditions=n.required();chart;chartData;chartPlugins;chartOptions;constructor(){x(()=>{this.isDarkTheme(),this.primaryColor(),this.surfaceColor(),this.dataset(),this.drawChart()})}createChart(){let e=document.getElementById("heatmap").getContext("2d");this.chart&&this.chart.destroy(),this.chart=new T(e,{type:"matrix",data:this.chartData,options:this.chartOptions,plugins:this.chartPlugins})}drawChart(){setTimeout(()=>{this.chartData=this.setChartData(),this.chartPlugins=this.setChartPlugins(),this.chartOptions=this.setChartOptions(),this.createChart()},100)}setChartPlugins(){return[]}chartBackgroundColor(e){let t=getComputedStyle(document.documentElement),a=e.dataset.data[e.dataIndex].v,s=this.conditions(),i="--p-surface-800";for(let o of s)if(a>=o.min&&a<=o.max){i=o.color[this.isDarkTheme()?"dark":"light"];break}return t.getPropertyValue(i)}setChartData(){return{datasets:[{label:this.label()??"dataset",data:this.dataset(),backgroundColor:this.chartBackgroundColor.bind(this),hoverBackgroundColor:void 0,hoverBorderColor:void 0,borderRadius:4,borderWidth:0,width(e){let t=e.chart.chartArea||{};return(t.right-t.left)/14-1},height(e){let t=e.chart.chartArea||{};return(t.bottom-t.top)/9-1}}]}}setChartOptions(){let t=getComputedStyle(document.documentElement).getPropertyValue("--p-surface-400");return{animation:!1,interaction:{intersect:!1,mode:"index"},responsive:!0,maintainAspectRatio:!1,layout:{padding:0},events:[],plugins:{legend:{display:!1},tooltip:{enabled:!1}},scales:{x:{type:"time",offset:!0,time:{unit:"week",round:"week",isoWeekDay:1,displayFormats:{week:"MMM dd"}},ticks:{maxRotation:0,autoSkip:!0,font:{size:12},color:this.isDarkTheme()?"rgba(255,255,255,0.64)":t},grid:{display:!1,drawBorder:!1,tickLength:0},border:{display:!1}},y:{type:"time",offset:!0,time:{unit:"day",round:"day",isoWeek:1,parser:"i",displayFormats:{day:"iii"}},reverse:!0,position:"right",ticks:{maxRotation:0,autoSkip:!0,padding:1,font:{size:12,weight:500},color:this.isDarkTheme()?"rgba(255,255,255,0.64)":t},border:{display:!1},grid:{display:!1,drawBorder:!1,tickLength:0}}}}}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=b({type:r,selectors:[["heat-map-chart"]],hostAttrs:[1,"flex","h-full","w-full","cursor-pointer","max-w-full","min-h-80"],inputs:{label:[1,"label"],dataset:[1,"dataset"],conditions:[1,"conditions"]},decls:1,vars:0,consts:[["id","heatmap",1,"h-full","w-full","max-w-full","min-h-80"]],template:function(t,a){t&1&&z(0,"canvas",0)},dependencies:[v],encapsulation:2})};var he=(r,e)=>({width:r,height:e});function pe(r,e){if(r&1&&(m(0,"h2",6),S(1),g()),r&2){let t=C(2);d(),P(t.title())}}function me(r,e){if(r&1&&(m(0,"p",7),S(1),g()),r&2){let t=C(2);d(),P(t.description())}}function ge(r,e){if(r&1&&(m(0,"div",3),w(1,pe,2,1,"h2",4)(2,me,2,1,"p",5),g()),r&2){let t=C();j(G(4,he,t.chartDim().width+"px",t.chartDim().height+"px")),d(),h("ngIf",t.title()),d(),h("ngIf",t.description())}}var $=class r{layoutService=y(_);class=n("");data=n([80,20]);labels=n(["Score","Gray Area"]);bgColors=n();description=n();title=n();chartData;chartOptions;chartPlugins;chartDim=L({width:"100%",height:"100%"});isDarkTheme=l(()=>this.layoutService.isDarkTheme());primaryColor=l(()=>this.layoutService.layoutConfig().primary);surfaceColor=l(()=>this.layoutService.layoutConfig().surface);constructor(){x(()=>{this.isDarkTheme(),this.primaryColor(),this.surfaceColor(),this.data(),this.drawChart()})}drawChart(){setTimeout(()=>{this.chartData=this.setChartData(),this.chartOptions=this.setChartOptions(),this.chartPlugins=this.setChartPlugins()},100)}setChartData(){let e=getComputedStyle(document.documentElement),t=this.bgColors();return{labels:this.labels(),datasets:[{label:"",data:this.data(),backgroundColor:t.map(a=>e.getPropertyValue(`--p-${a}`).trim()),borderWidth:0,spacing:6,borderRadius:6,cutout:"80%",circumference:180,rotation:270}]}}setChartOptions(){return{aspectRatio:1.5,plugins:{legend:{display:!1},tooltip:{enabled:!1,position:"nearest",external:function(e){let{chart:t,tooltip:a}=e,s=t.canvas.parentNode.querySelector("div.chartjs-tooltip");if(s||(s=document.createElement("div"),s.classList.add("chartjs-tooltip","dark:bg-surface-950","bg-surface-0","rounded-[8px]","overflow-hidden","opacity-100","border","border-surface","absolute","transition-all","duration-[0.05s]","pointer-events-none","shadow-[0px_16px_32px_-12px_rgba(88,92,95,0.10)]"),t.canvas.parentNode.appendChild(s)),a.opacity===0){s.style.opacity=0;return}if(s.innerHTML="",a.body){let i=document.createElement("div");i.classList.add("flex","itens-center","justify-center","gap-2","px-3","py-1.5","min-w-12");let o=document.createElement("span");o.appendChild(document.createTextNode(a.dataPoints[0].parsed.toLocaleString("en-US"))),o.classList.add("font-semibold","text-base","text-surface-950","dark:text-surface-0","text-right"),i.appendChild(o),s.appendChild(i)}s.style.opacity=1,s.style.font=a.options.bodyFont.string,s.style.padding=0,s.style.left=a.x+"px",s.style.top=a.y+"px"}}}}}setChartPlugins(){return[]}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=b({type:r,selectors:[["gauge-chart"]],inputs:{class:[1,"class"],data:[1,"data"],labels:[1,"labels"],bgColors:[1,"bgColors"],description:[1,"description"],title:[1,"title"]},decls:3,vars:4,consts:[[1,"relative","min-h-32","flex","items-center","justify-center",3,"ngClass"],["type","doughnut",1,"h-auto","relative","z-50","mx-auto","cursor-pointer",3,"data","options"],["class","absolute z-20 bottom-8 left-1/2 -translate-x-1/2 flex flex-col items-center justify-end transition-all",3,"style",4,"ngIf"],[1,"absolute","z-20","bottom-8","left-1/2","-translate-x-1/2","flex","flex-col","items-center","justify-end","transition-all"],["class","text-center font-medium text-surface-500 dark:text-white/64",4,"ngIf"],["class","mt-1 text-center text-2xl font-medium text-surface-950 dark:text-surface-0",4,"ngIf"],[1,"text-center","font-medium","text-surface-500","dark:text-white/64"],[1,"mt-1","text-center","text-2xl","font-medium","text-surface-950","dark:text-surface-0"]],template:function(t,a){t&1&&(m(0,"div",0),F(1,"p-chart",1),w(2,ge,3,7,"div",2),g()),t&2&&(h("ngClass",a.class()),d(),h("data",a.chartData)("options",a.chartOptions),d(),h("ngIf",a.title()||a.description()))},dependencies:[v,H,U,X,K],encapsulation:2})};export{Q as a,$ as b};
